<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>數學卷5 - 動態課堂演示</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50; /* 深藍色 - 穩重 */
            --accent-color: #e74c3c;  /* 紅色 - 重點/提示 */
            --answer-color: #27ae60;  /* 綠色 - 答案 */
            --bg-color: #ecf0f1;
            --card-bg: #ffffff;
        }

        body {
            font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* 頂部進度條 */
        .progress-bar-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background-color: #bdc3c7;
        }
        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* 幻燈片卡片容器 */
        .slider-container {
            width: 90%;
            max-width: 1100px;
            height: 85vh;
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid #dcdcdc;
        }

        /* 每一頁的樣式 */
        .slide {
            flex: 1;
            display: none;
            flex-direction: column;
            padding: 30px 60px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .slide.active {
            display: flex;
            opacity: 1;
        }

        /* 題目區域 */
        .question-header {
            font-size: 1.6rem;
            color: var(--primary-color);
            font-weight: bold;
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 10px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
        }

        .question-content {
            font-size: 1.5rem;
            color: #34495e;
            margin-bottom: 20px;
            line-height: 1.6;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 6px solid var(--primary-color);
        }

        /* 口訣/提示區域 */
        .hint-box {
            font-size: 1.1rem;
            color: var(--accent-color);
            font-style: italic;
            margin-bottom: 10px;
            min-height: 1.5em; 
        }

        /* 解答區域 */
        .solution-area {
            flex: 1;
            background-color: #fff;
            overflow-y: auto;
            font-size: 1.3rem;
            padding: 10px;
            border-top: 1px dashed #ccc;
        }

        /* 簡單模式的答案 */
        .simple-answer {
            display: none;
            color: var(--answer-color);
            font-weight: bold;
            font-size: 1.8rem;
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            padding-top: 10px;
        }

        /* 複雜模式的步驟 */
        .step-item {
            display: none;
            margin-bottom: 10px;
            padding: 10px 15px;
            border-left: 4px solid #95a5a6;
            background: #fdfdfd;
            animation: slideIn 0.4s ease;
        }
        .step-item.highlight {
            border-left-color: var(--accent-color);
            background: #fff5f5;
            font-weight: bold;
        }

        /* 動畫 */
        @keyframes popIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* 控制按鈕區 */
        .controls {
            padding: 15px 40px;
            background-color: #f0f3f4;
            border-top: 1px solid #bdc3c7;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        button {
            padding: 10px 20px;
            font-size: 1.1rem;
            cursor: pointer;
            border: none;
            border-radius: 6px;
            font-family: inherit;
            transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .btn-nav {
            background-color: #fff;
            color: #555;
            border: 1px solid #ccc;
        }
        .btn-nav:hover { background-color: #e0e0e0; }
        .btn-nav:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-action {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            min-width: 160px;
        }
        .btn-action:hover {
            background-color: #34495e;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .slide-info {
            font-size: 1rem;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        /* Latex 字體調整 */
        mjx-container { font-size: 115% !important; }
    </style>
</head>
<body>

<div class="progress-bar-container">
    <div class="progress-bar" id="progressBar"></div>
</div>

<div class="slider-container">
    
    <div class="slide active" data-type="simple">
        <div class="question-header">1. 因式分解 (立方差)</div>
        <div class="hint-box">口訣：前減後，後平方加乘積加平方</div>
        <div class="question-content">
            \( a^3 - b^3 = \quad ? \)
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( (a-b)(a^2 + ab + b^2) \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">2. 同底數冪相除</div>
        <div class="hint-box">提示：指數相減</div>
        <div class="question-content">
            \( a^m \div a^n = \quad ? \)
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( a^{m-n} \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">3. 對數換底公式</div>
        <div class="hint-box">提示：轉為以 c 為底</div>
        <div class="question-content">
            \( \log_a b = \quad ? \)
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( \frac{\log_c b}{\log_c a} \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">4. 線段中點公式</div>
        <div class="hint-box">提示：座標相加除以 2</div>
        <div class="question-content">
            已知 \(A(x_1, y_1), B(x_2, y_2)\)，求中點 \(M\)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( M = \left( \frac{x_1+x_2}{2}, \frac{y_1+y_2}{2} \right) \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">5. 點到直線距離公式</div>
        <div class="hint-box">分子絕對值，分母根號係數平方和</div>
        <div class="question-content">
            點 \( P(x_0, y_0) \) 到 \( Ax + By + C = 0 \) 的距離 \( d \)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( d = \frac{|Ax_0 + By_0 + C|}{\sqrt{A^2 + B^2}} \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">6. 集合運算</div>
        <div class="hint-box">全集除去 1, 3, 5</div>
        <div class="question-content">
            \( U = \{1, 2, 3, 4, 5, 6\} \)，\( A = \{1, 3, 5\} \)。<br>
            求 \( C_U A \)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( \{2, 4, 6\} \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">7. 函數奇偶性</div>
        <div class="hint-box">提示：偶數次方，圖像關於 y 軸對稱</div>
        <div class="question-content">
            判斷 \( f(x) = x^2 \) 的奇偶性。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                偶函數
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">8. 拋物線焦點</div>
        <div class="hint-box">提示：\(4c=12 \Rightarrow c=3\)，焦點在 x 軸</div>
        <div class="question-content">
            拋物線 \( y^2 = 12x \) 的焦點座標。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( (3, 0) \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">9. 期望值計算</div>
        <div class="hint-box">值 × 概率，然後相加</div>
        <div class="question-content">
            \( P(0)=0.2, P(1)=0.5, P(2)=0.2, P(3)=0.1 \)<br>
            求 \( E(X) \)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( 0 + 0.5 + 0.4 + 0.3 = 1.2 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">10. 方差性質</div>
        <div class="hint-box">倍數的平方：\((-3)^2 = 9\)</div>
        <div class="question-content">
            \( D(Y) = 1 \)，求 \( D(-3Y + 5) \)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( 9 \times 1 = 9 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">11. 求直線參數</div>
        <div class="hint-box">代入 \(x=-3, y=8\)</div>
        <div class="question-content">
            點 \( A(-3, 8) \) 在 \( y = -2x + m \) 上，求 \( m \)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( 8 = -2(-3) + m \Rightarrow 8 = 6 + m \Rightarrow m = 2 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">12. 多項式餘數</div>
        <div class="hint-box">令除式為0，代入 x=1</div>
        <div class="question-content">
            \( -3x^2 + x + 4 \) 除以 \( x - 1 \) 的餘數。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( -3(1) + 1 + 4 = 2 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">13. 集合交集</div>
        <div class="hint-box">數軸重疊部分：(-3, 6) 和 (1, 8)</div>
        <div class="question-content">
            \( A = (-3, 6), B = (1, 8) \)。求 \( A \cap B \)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( \{x \mid 1 < x < 6\} \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">14. 平均數逆運算</div>
        <div class="hint-box">總和 = 平均數 × 個數 (2 × 5 = 10)</div>
        <div class="question-content">
            數據 -5, 1, 3, x, 7 的平均數為 2，求 x。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( 6 + x = 10 \Rightarrow x = 4 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">15. 概率 (古典概型)</div>
        <div class="hint-box">3綠3紅3黃，取3球顏色不同</div>
        <div class="question-content">
            共9球，同時取3球，求顏色皆不同的概率。
        </div>
        <div class="solution-area">
            <div class="step-item">分母 (總取法)：\( C^9_3 = \frac{9 \times 8 \times 7}{3 \times 2 \times 1} = 84 \)</div>
            <div class="step-item">分子 (各取1球)：\( C^3_1 \times C^3_1 \times C^3_1 = 3 \times 3 \times 3 = 27 \)</div>
            <div class="step-item highlight">答案：\( \frac{27}{84} = \frac{9}{28} \)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">16. 橢圓綜合題</div>
        <div class="hint-box">根據答案反推：短軸長6 \(\rightarrow b=3\)，焦點在 y 軸</div>
        <div class="question-content">
            方程為 \( \frac{y^2}{25} + \frac{x^2}{9} = 1 \) (設)。求焦點、長軸、短軸、焦距、離心率。
        </div>
        <div class="solution-area">
            <div class="step-item">1. 參數確認：\(a^2=25 \Rightarrow a=5\)，\(b^2=9 \Rightarrow b=3\)</div>
            <div class="step-item">2. 短軸長 \(2b = 6\)，長軸長 \(2a = 10\)</div>
            <div class="step-item">3. 求 c：\(c = \sqrt{25-9} = \sqrt{16} = 4\)</div>
            <div class="step-item">4. 焦點 (在y軸)：\((0, \pm 4)\)；焦距 \(2c = 8\)</div>
            <div class="step-item highlight">5. 離心率：\(e = \frac{c}{a} = \frac{4}{5} = 0.8\)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">17. 解對數方程</div>
        <div class="hint-box">合併左邊 \(\rightarrow\) 去對數 \(\rightarrow\) 解方程 \(\rightarrow\) 驗根</div>
        <div class="question-content">
            \( \lg(x) + \lg(x - 3) = \lg(x + 5) \)
        </div>
        <div class="solution-area">
            <div class="step-item">合併：\( \lg[x(x-3)] = \lg(x+5) \)</div>
            <div class="step-item">去對數：\( x^2 - 3x = x + 5 \)</div>
            <div class="step-item">移項：\( x^2 - 4x - 5 = 0 \)</div>
            <div class="step-item">因式分解：\( (x-5)(x+1) = 0 \Rightarrow x=5, x=-1 \)</div>
            <div class="step-item highlight">驗根：\( x=-1 \) (捨)。答案 \( x=5 \)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">18. 韋達定理</div>
        <div class="hint-box">\( \alpha+\beta = -b/a, \alpha\beta = c/a \)</div>
        <div class="question-content">
            \( x^2 - 5x + 6 = 0 \) 兩根為 \( \alpha, \beta \)。
        </div>
        <div class="solution-area">
            <div class="step-item">(1) \( \alpha + \beta = -(-5)/1 = 5 \)</div>
            <div class="step-item">(2) \( \alpha\beta = 6/1 = 6 \)</div>
            <div class="step-item">(3) \( \alpha^2 + \beta^2 = (\alpha+\beta)^2 - 2\alpha\beta \)</div>
            <div class="step-item highlight">計算：\( 5^2 - 2(6) = 25 - 12 = 13 \)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">19. 數學歸納法</div>
        <div class="hint-box">證明 \( 1+2+...+n = \frac{n(n+1)}{2} \)</div>
        <div class="question-content">
            證明步驟：
        </div>
        <div class="solution-area">
            <div class="step-item">1. 當 \( n=1 \) 時，左=1，右=\( \frac{1(2)}{2} = 1 \)，成立。</div>
            <div class="step-item">2. 假設 \( n=k \) 時成立，即 \( 1+...+k = \frac{k(k+1)}{2} \)。</div>
            <div class="step-item">3. 當 \( n=k+1 \) 時：<br>左邊 \( = [1+...+k] + (k+1) \)</div>
            <div class="step-item">代入假設：\( = \frac{k(k+1)}{2} + (k+1) = (k+1)[\frac{k}{2} + 1] \)</div>
            <div class="step-item highlight">通分：\( = (k+1)\frac{k+2}{2} = \frac{(k+1)(k+2)}{2} \) = 右邊。<br>得證。</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">20. 部分分式分解</div>
        <div class="hint-box">分母分解為 \((x+2)(x+3)\)</div>
        <div class="question-content">
            \( \frac{5x + 13}{x^2 + 5x + 6} = \frac{A}{x+2} + \frac{B}{x+3} \)
        </div>
        <div class="solution-area">
            <div class="step-item">設：\( 5x+13 = A(x+3) + B(x+2) \)</div>
            <div class="step-item">令 \( x=-3 \)：\( -15+13 = B(-1) \Rightarrow -2 = -B \Rightarrow B=2 \)</div>
            <div class="step-item">令 \( x=-2 \)：\( -10+13 = A(1) \Rightarrow 3 = A \Rightarrow A=3 \)</div>
            <div class="step-item highlight">答案：\( \frac{3}{x+2} + \frac{2}{x+3} \)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">21. 綜合除法</div>
        <div class="hint-box">缺項補0，係數：2, 0, 3, -60</div>
        <div class="question-content">
            \( (2x^3 + 3x - 60) \div (x - 3) \)
        </div>
        <div class="solution-area">
            <div class="step-item">配置：被除式 [2, 0, 3, -60]，除數 \(x=3\)</div>
            <div class="step-item">運算過程：
                <br>2 \(\downarrow\) (2)
                <br>2×3=6 \(\rightarrow\) 0+6=6
                <br>6×3=18 \(\rightarrow\) 3+18=21
                <br>21×3=63 \(\rightarrow\) -60+63=3
            </div>
            <div class="step-item highlight">商式：\( 2x^2 + 6x + 21 \)<br>餘式：3</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">22. 圓、直線與弦長</div>
        <div class="hint-box">弦長公式 \( 2\sqrt{r^2 - d^2} \)</div>
        <div class="question-content">
            圓 \( (x-2)^2 + (y-5)^2 = 169 \)<br>
            直線 \( 3x + 4y - 1 = 0 \)
        </div>
        <div class="solution-area">
            <div class="step-item">(1) 圓心 \( (2, 5) \)，半徑 \( r = 13 \)</div>
            <div class="step-item">(2) 直線斜率：\( 4y = -3x+1 \Rightarrow k = -3/4 \)</div>
            <div class="step-item">(3) 圓心到直線距離 \( d \)：
                <br>\( d = \frac{|3(2)+4(5)-1|}{\sqrt{3^2+4^2}} = \frac{25}{5} = 5 \)</div>
            <div class="step-item highlight">弦長 \( AB = 2\sqrt{13^2 - 5^2} = 2\sqrt{144} = 24 \)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">23. 期望值應用</div>
        <div class="hint-box">期望值 = 抽取數量 × (目標佔比)</div>
        <div class="question-content">
            5枚10元，5枚1元 (共10枚)。抽出4枚。<br>
            求抽出10元硬幣數目 \(X\) 的期望值。
        </div>
        <div class="solution-area">
            <div class="step-item">這是一個超幾何分佈問題，但期望值有簡單公式。</div>
            <div class="step-item">每次抽到10元的概率 \( p = \frac{5}{10} = 0.5 \)</div>
            <div class="step-item">抽取次數 \( n = 4 \)</div>
            <div class="step-item highlight">\( E(X) = n \times p = 4 \times 0.5 = 2 \)</div>
            <div class="step-item">(說明：平均每抽2枚就有1枚是10元，抽4枚平均有2枚)</div>
        </div>
    </div>

</div>

<div class="controls">
    <button class="btn-nav" id="prevBtn" onclick="changeSlide(-1)">&#10094; 上一題</button>
    
    <div style="text-align: center;">
        <button class="btn-action" id="actionBtn" onclick="triggerAction()">顯示答案</button>
        <div class="slide-info" id="slideInfo">1 / 23</div>
    </div>

    <button class="btn-nav" id="nextBtn" onclick="changeSlide(1)">下一題 &#10095;</button>
</div>

<script>
    let currentSlideIndex = 0;
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const actionBtn = document.getElementById('actionBtn');
    const slideInfo = document.getElementById('slideInfo');
    const progressBar = document.getElementById('progressBar');

    function init() {
        showSlide(0);
    }

    function showSlide(index) {
        slides.forEach(s => s.classList.remove('active'));
        slides[index].classList.add('active');
        
        currentSlideIndex = index;
        updateUI();
        resetSlideState(slides[index]);
    }

    function changeSlide(direction) {
        let newIndex = currentSlideIndex + direction;
        if (newIndex >= 0 && newIndex < totalSlides) {
            showSlide(newIndex);
        }
    }

    function updateUI() {
        prevBtn.disabled = currentSlideIndex === 0;
        nextBtn.disabled = currentSlideIndex === totalSlides - 1;
        slideInfo.innerText = `${currentSlideIndex + 1} / ${totalSlides}`;
        
        const progress = ((currentSlideIndex + 1) / totalSlides) * 100;
        progressBar.style.width = `${progress}%`;

        const currentSlide = slides[currentSlideIndex];
        const type = currentSlide.getAttribute('data-type');
        if (type === 'simple') {
            actionBtn.innerText = "顯示答案";
        } else {
            actionBtn.innerText = "逐步講解";
        }
    }

    function resetSlideState(slide) {
        slide.querySelectorAll('.simple-answer').forEach(el => el.style.display = 'none');
        slide.querySelectorAll('.step-item').forEach(el => el.style.display = 'none');
        const solutionArea = slide.querySelector('.solution-area');
        if(solutionArea) solutionArea.scrollTop = 0;
    }

    function triggerAction() {
        const currentSlide = slides[currentSlideIndex];
        const type = currentSlide.getAttribute('data-type');
        const solutionArea = currentSlide.querySelector('.solution-area');

        if (type === 'simple') {
            const answer = currentSlide.querySelector('.simple-answer');
            if (answer && answer.style.display !== 'block') {
                answer.style.display = 'block';
            }
        } else {
            const steps = currentSlide.querySelectorAll('.step-item');
            for (let step of steps) {
                if (step.style.display !== 'block') {
                    step.style.display = 'block';
                    solutionArea.scrollTop = solutionArea.scrollHeight;
                    return;
                }
            }
        }
    }

    // 鍵盤控制
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight' || e.key === 'PageDown') changeSlide(1);
        if (e.key === 'ArrowLeft' || e.key === 'PageUp') changeSlide(-1);
        if (e.key === ' ' || e.key === 'Enter') triggerAction();
    });

    init();
</script>

</body>
</html>