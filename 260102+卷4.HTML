<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>數學卷4 - 動態課堂演示</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --primary-color: #2980b9; /* 藍色系 - 題目 */
            --accent-color: #d35400;  /* 橘紅 - 重點/提示 */
            --answer-color: #27ae60;  /* 綠色 - 答案 */
            --bg-color: #f4f6f7;
            --card-bg: #ffffff;
        }

        body {
            font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* 頂部進度條 */
        .progress-bar-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background-color: #e0e0e0;
        }
        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* 幻燈片卡片容器 */
        .slider-container {
            width: 90%;
            max-width: 1100px;
            height: 85vh;
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid #dcdcdc;
        }

        /* 每一頁的樣式 */
        .slide {
            flex: 1;
            display: none;
            flex-direction: column;
            padding: 30px 60px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .slide.active {
            display: flex;
            opacity: 1;
        }

        /* 題目區域 */
        .question-header {
            font-size: 1.6rem;
            color: var(--primary-color);
            font-weight: bold;
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 10px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
        }

        .question-content {
            font-size: 1.5rem;
            color: #34495e;
            margin-bottom: 20px;
            line-height: 1.5;
            background: #ecf0f1;
            padding: 15px 20px;
            border-radius: 8px;
            border-left: 6px solid var(--primary-color);
        }

        /* 口訣/提示區域 */
        .hint-box {
            font-size: 1.1rem;
            color: var(--accent-color);
            font-style: italic;
            margin-bottom: 10px;
            min-height: 1.5em; 
        }

        /* 解答區域 */
        .solution-area {
            flex: 1;
            background-color: #fff;
            overflow-y: auto;
            font-size: 1.3rem;
            padding: 10px;
            border-top: 1px dashed #ccc;
        }

        /* 簡單模式的答案 */
        .simple-answer {
            display: none;
            color: var(--answer-color);
            font-weight: bold;
            font-size: 1.8rem;
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            padding-top: 20px;
        }

        /* 複雜模式的步驟 */
        .step-item {
            display: none;
            margin-bottom: 10px;
            padding: 8px 15px;
            border-left: 4px solid #bdc3c7;
            background: #f9f9f9;
            animation: slideIn 0.4s ease;
        }
        .step-item.highlight {
            border-left-color: var(--accent-color);
            background: #fff8e1;
            font-weight: bold;
        }

        /* 動畫 */
        @keyframes popIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* 控制按鈕區 */
        .controls {
            padding: 15px 40px;
            background-color: #fafafa;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        button {
            padding: 10px 20px;
            font-size: 1.1rem;
            cursor: pointer;
            border: none;
            border-radius: 6px;
            font-family: inherit;
            transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .btn-nav {
            background-color: #fff;
            color: #555;
            border: 1px solid #ccc;
        }
        .btn-nav:hover { background-color: #f0f0f0; }
        .btn-nav:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-action {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            min-width: 160px;
        }
        .btn-action:hover {
            background-color: #1f6391;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .slide-info {
            font-size: 1rem;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        /* Latex 字體調整 */
        mjx-container { font-size: 110% !important; }
    </style>
</head>
<body>

<div class="progress-bar-container">
    <div class="progress-bar" id="progressBar"></div>
</div>

<div class="slider-container">
    
    <div class="slide active" data-type="simple">
        <div class="question-header">1. 立方差公式</div>
        <div class="hint-box">提示：\(a^3 - 3^3\) (前減後，後平方加乘積加平方)</div>
        <div class="question-content">
            \( a^3 - 27 = ( a - 3 )( \quad ? \quad ) \)
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( a^2 + 3a + 9 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">2. 同底數冪運算</div>
        <div class="hint-box">提示：底數不變，指數相加</div>
        <div class="question-content">
            \( x^3 \cdot x^4 = \quad ? \)
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( x^7 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">3. 換底公式</div>
        <div class="hint-box">提示：換成以 c 為底的分數</div>
        <div class="question-content">
            \( \log_a b = \quad ? \)
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( \frac{\log_c b}{\log_c a} \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">4. 兩點求斜率</div>
        <div class="hint-box">提示：縱座標差 (3-0) 除以 橫座標差 (1-0)</div>
        <div class="question-content">
            已知 \(A(0, 0)\) 和 \(B(1, 3)\)，求斜率 \(k\)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( k = \frac{3-0}{1-0} = 3 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">5. 點到直線距離</div>
        <div class="hint-box">提示：分母是 \(\sqrt{3^2+4^2}=5\)，分子代入 (0,0)</div>
        <div class="question-content">
            點 \((0, 0)\) 到直線 \(3x + 4y - 5 = 0\) 的距離 \(d\)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( d = \frac{|-5|}{5} = 1 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">6. 集合補集運算</div>
        <div class="hint-box">從 1..6 中去掉 1, 3, 5</div>
        <div class="question-content">
            \(U=\{1, 2, 3, 4, 5, 6\}\)，\(A=\{1, 3, 5\}\)。求 \(C_U A\)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( \{2, 4, 6\} \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">7. 函數奇偶性</div>
        <div class="hint-box">提示：次方 3 和 1 都是奇數</div>
        <div class="question-content">
            \( f(x) = x^3 + 3x \) 是奇函數還是偶函數？
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                奇函數
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">8. 拋物線焦點</div>
        <div class="hint-box">提示：\(4p=8 \Rightarrow p=2\)，一次項是 x，焦點在 x 軸</div>
        <div class="question-content">
            拋物線 \( y^2 = 8x \) 的焦點座標。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( (2, 0) \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">9. 期望值計算</div>
        <div class="hint-box">值乘以概率然後相加</div>
        <div class="question-content">
            \( X \) 取 1, 2, 3，概率為 0.3, 0.4, 0.3。<br>
            \( E(X) = 1(0.3) + 2(0.4) + 3(0.3) = ? \)
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( 0.3 + 0.8 + 0.9 = 2 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">10. 方差性質</div>
        <div class="hint-box">提示：係數 -2 的平方 乘以原方差</div>
        <div class="question-content">
            已知 \( D(Y)=1 \)，求 \( D(-2Y) \)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( (-2)^2 \times 1 = 4 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">11. 直線參數 m</div>
        <div class="hint-box">提示：把 \(x=-4, y=9\) 代入</div>
        <div class="question-content">
            點 \( A(-4, 9) \) 在 \( y + 2x = m \) 上，求 \( m \)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( 9 + 2(-4) = 9 - 8 = 1 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">12. 函數值計算</div>
        <div class="hint-box">把 1 代入算出來</div>
        <div class="question-content">
            \( f(x) = 3x^2 + x + 4 \)，求 \( f(1) \)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( 3(1)^2 + 1 + 4 = 8 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">13. 區間交集</div>
        <div class="hint-box">找公共部分：左邊取大(1)，右邊取小(4)</div>
        <div class="question-content">
            區間 \((-2, 4)\) 和 \((1, 7)\) 的公共部分 \( A \cap B \)。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( \{ x \mid 1 < x < 4 \} \) (或寫 \((1, 4)\))
            </div>
        </div>
    </div>

    <div class="slide" data-type="simple">
        <div class="question-header">14. 平均數求未知數</div>
        <div class="hint-box">總和 = \(1 \times 3\)</div>
        <div class="question-content">
            數據 1, 1, x 的平均數是 1，求 x。
        </div>
        <div class="solution-area">
            <div class="simple-answer">
                \( 1+1+x=3 \Rightarrow x=1 \)
            </div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">15. 概率 (顏色不同)</div>
        <div class="hint-box">分子：各取一個；分母：任取三個</div>
        <div class="question-content">
            2綠 3紅 4黃 (共9球)，取3球顏色各不同的概率。
        </div>
        <div class="solution-area">
            <div class="step-item">分母：\( C^9_3 = \frac{9 \times 8 \times 7}{6} = 84 \)</div>
            <div class="step-item">分子：\( C^2_1 \times C^3_1 \times C^4_1 = 2 \times 3 \times 4 = 24 \)</div>
            <div class="step-item highlight">答案：\( \frac{24}{84} = \frac{2}{7} \)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">16. 橢圓綜合題</div>
        <div class="hint-box">注意分母大的才是 \(a^2\)</div>
        <div class="question-content">
            \( \frac{x^2}{16} + \frac{y^2}{25} = 1 \)
        </div>
        <div class="solution-area">
            <div class="step-item">1. 判斷：\(25 > 16\)，焦點在 \(y\) 軸。</div>
            <div class="step-item">2. 參數：\(a^2=25 \Rightarrow a=5\)，\(b^2=16 \Rightarrow b=4\)</div>
            <div class="step-item">3. 求 c：\(c^2 = a^2 - b^2 = 25 - 16 = 9 \Rightarrow c=3\)</div>
            <div class="step-item highlight">4. 離心率：\(e = \frac{c}{a} = \frac{3}{5}\)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">17. 解對數方程</div>
        <div class="hint-box">左邊合併 -> 去對數 -> 解二次方程</div>
        <div class="question-content">
            \( \lg(x+1) + \lg(x-2) = \lg 4 \)
        </div>
        <div class="solution-area">
            <div class="step-item">合併：\( \lg[(x+1)(x-2)] = \lg 4 \)</div>
            <div class="step-item">去對數：\( (x+1)(x-2) = 4 \)</div>
            <div class="step-item">展開整理：\( x^2 - x - 2 = 4 \Rightarrow x^2 - x - 6 = 0 \)</div>
            <div class="step-item">因式分解：\( (x-3)(x+2) = 0 \)，得 \( x=3 \) 或 \( x=-2 \)</div>
            <div class="step-item highlight">檢驗：\(x=-2\) 代入 \(\lg(-1)\) 無意義(捨)。<br>答案：\( x=3 \)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">18. 韋達定理求值</div>
        <div class="hint-box">利用 \( (\alpha+\beta)^2 - 2\alpha\beta \)</div>
        <div class="question-content">
            \( x^2 + 5x + 6 = 0 \) 兩根為 \( \alpha, \beta \)。
        </div>
        <div class="solution-area">
            <div class="step-item">(1) \(\alpha + \beta = -5/1 = -5\)</div>
            <div class="step-item">(2) \(\alpha\beta = 6/1 = 6\)</div>
            <div class="step-item">(3) \(\alpha^2 + \beta^2 = (\alpha+\beta)^2 - 2\alpha\beta\)</div>
            <div class="step-item highlight">計算：\((-5)^2 - 2(6) = 25 - 12 = 13\)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">19. 數學歸納法證明</div>
        <div class="hint-box">證明 \( 1 + 3 + ... + (2n-1) = n^2 \)</div>
        <div class="question-content">
            請補全第三步：當 \( n=k+1 \) 時...
        </div>
        <div class="solution-area">
            <div class="step-item">第一步：\(n=1\) 時，左=1，右=\(1^2\)=1，成立。</div>
            <div class="step-item">第二步：假設 \(n=k\) 時成立，即 \(1+...+(2k-1) = k^2\)。</div>
            <div class="step-item">第三步：當 \(n=k+1\) 時，<br>左邊 \( = [1+...+(2k-1)] + (2(k+1)-1) \)</div>
            <div class="step-item">代入假設：\( = k^2 + (2k + 2 - 1) = k^2 + 2k + 1 \)</div>
            <div class="step-item highlight">因式分解：\( = (k+1)^2 \) = 右邊。<br>所以對所有自然數 n 都成立。</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">20. 部分分式分解</div>
        <div class="hint-box">分母分解為 \((x+1)(x+2)\)</div>
        <div class="question-content">
            \( \frac{4x+10}{x^2+3x+2} = \frac{A}{x+1} + \frac{B}{x+2} \)
        </div>
        <div class="solution-area">
            <div class="step-item">設：\( \frac{4x+10}{(x+1)(x+2)} = \frac{A}{x+1} + \frac{B}{x+2} \)</div>
            <div class="step-item">通分比較分子：\( 4x+10 = A(x+2) + B(x+1) \)</div>
            <div class="step-item">令 \( x=-1 \)：\( -4+10 = A(1) \Rightarrow 6 = A \Rightarrow A=6 \)</div>
            <div class="step-item">令 \( x=-2 \)：\( -8+10 = B(-1) \Rightarrow 2 = -B \Rightarrow B=-2 \)</div>
            <div class="step-item highlight">結果：\( \frac{6}{x+1} - \frac{2}{x+2} \)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">21. 綜合除法</div>
        <div class="hint-box">注意缺項補 0，係數：2, 0, 3, -62</div>
        <div class="question-content">
            \( (2x^3 + 3x - 62) \div (x - 3) \)
        </div>
        <div class="solution-area">
            <div class="step-item">設置：被除式係數 [2, 0, 3, -62]，除數 \(x=3\)</div>
            <div class="step-item">第一層：2 落下 <br>\(\rightarrow 2 \times 3 = 6\)</div>
            <div class="step-item">第二層：\(0+6=6\) <br>\(\rightarrow 6 \times 3 = 18\)</div>
            <div class="step-item">第三層：\(3+18=21\) <br>\(\rightarrow 21 \times 3 = 63\)</div>
            <div class="step-item highlight">餘數：\(-62+63 = 1\)<br>商式：\(2x^2 + 6x + 21\)</div>
        </div>
    </div>

    <div class="slide" data-type="complex">
        <div class="question-header">22. 圓的性質</div>
        <div class="hint-box">標準式 \((x-h)^2 + (y-k)^2 = r^2\)</div>
        <div class="question-content">
            圓 \((x-1)^2 + (y-3)^2 = 100\)。<br>
            直線 \(3x + 4y + 5 = 0\)。
        </div>
        <div class="solution-area">
            <div class="step-item">(1) 圓心座標：\( (1, 3) \)</div>
            <div class="step-item">半徑：\( r = \sqrt{100} = 10 \)</div>
            <div class="step-item">(2) 直線斜率：將 \(3x+4y+5=0\) 化為 \(y\) 為主</div>
            <div class="step-item">\(4y = -3x - 5 \Rightarrow y = -\frac{3}{4}x - \frac{5}{4}\)</div>
            <div class="step-item highlight">斜率 \(k = -\frac{3}{4}\)</div>
        </div>
    </div>

</div>

<div class="controls">
    <button class="btn-nav" id="prevBtn" onclick="changeSlide(-1)">&#10094; 上一題</button>
    
    <div style="text-align: center;">
        <button class="btn-action" id="actionBtn" onclick="triggerAction()">顯示答案</button>
        <div class="slide-info" id="slideInfo">1 / 22</div>
    </div>

    <button class="btn-nav" id="nextBtn" onclick="changeSlide(1)">下一題 &#10095;</button>
</div>

<script>
    let currentSlideIndex = 0;
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const actionBtn = document.getElementById('actionBtn');
    const slideInfo = document.getElementById('slideInfo');
    const progressBar = document.getElementById('progressBar');

    function init() {
        showSlide(0);
    }

    function showSlide(index) {
        slides.forEach(s => s.classList.remove('active'));
        slides[index].classList.add('active');
        
        currentSlideIndex = index;
        updateUI();
        resetSlideState(slides[index]);
    }

    function changeSlide(direction) {
        let newIndex = currentSlideIndex + direction;
        if (newIndex >= 0 && newIndex < totalSlides) {
            showSlide(newIndex);
        }
    }

    function updateUI() {
        prevBtn.disabled = currentSlideIndex === 0;
        nextBtn.disabled = currentSlideIndex === totalSlides - 1;
        slideInfo.innerText = `${currentSlideIndex + 1} / ${totalSlides}`;
        
        const progress = ((currentSlideIndex + 1) / totalSlides) * 100;
        progressBar.style.width = `${progress}%`;

        const currentSlide = slides[currentSlideIndex];
        const type = currentSlide.getAttribute('data-type');
        if (type === 'simple') {
            actionBtn.innerText = "顯示答案";
        } else {
            actionBtn.innerText = "逐步講解";
        }
    }

    function resetSlideState(slide) {
        slide.querySelectorAll('.simple-answer').forEach(el => el.style.display = 'none');
        slide.querySelectorAll('.step-item').forEach(el => el.style.display = 'none');
        const solutionArea = slide.querySelector('.solution-area');
        if(solutionArea) solutionArea.scrollTop = 0;
    }

    function triggerAction() {
        const currentSlide = slides[currentSlideIndex];
        const type = currentSlide.getAttribute('data-type');
        const solutionArea = currentSlide.querySelector('.solution-area');

        if (type === 'simple') {
            const answer = currentSlide.querySelector('.simple-answer');
            if (answer && answer.style.display !== 'block') {
                answer.style.display = 'block';
            }
        } else {
            const steps = currentSlide.querySelectorAll('.step-item');
            for (let step of steps) {
                if (step.style.display !== 'block') {
                    step.style.display = 'block';
                    solutionArea.scrollTop = solutionArea.scrollHeight;
                    return;
                }
            }
        }
    }

    // 鍵盤控制
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight' || e.key === 'PageDown') changeSlide(1);
        if (e.key === 'ArrowLeft' || e.key === 'PageUp') changeSlide(-1);
        if (e.key === ' ' || e.key === 'Enter') triggerAction();
    });

    init();
</script>

</body>
</html>